<div class="layout-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="!isSidebarOpen && !isMobile" [class.open]="isSidebarOpen && isMobile">
    <div class="sidebar-header">
      <a routerLink="/" class="logo-container">
        <img src="assets/logo.png" alt="Logo AquaTresor" class="logo">
        <h2 class="logo-title">Aqua Trésor</h2>
      </a>
      <i class="fas fa-times close-icon" (click)="toggleSidebar()"></i>
    </div>
    <hr class="divider" />
    <ul class="sidebar-menu">
      <li routerLinkActive="active">
        <a routerLink="/admin/dashboard" (click)="closeSidebarOnNavigation()">
          <i class="ri-line-chart-fill"></i>
          <span>Tableau de Bord</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/List-users" (click)="closeSidebarOnNavigation()">
          <i class="ri-user-line"></i>
          <span>Gestion Utilisateurs</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/list-categories" (click)="closeSidebarOnNavigation()">
          <i class="fas fa-shapes" style="color: white; -webkit-text-stroke: 1px black; text-stroke: 1px black;"></i>
          <span>Gestion Catégories</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/bassin" (click)="closeSidebarOnNavigation()">
          <i class="fas fa-water"></i>
          <span>Gestion Bassins</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/promotions" (click)="closeSidebarOnNavigation()">
          <i class="ri-percent-line"></i>
          <span>Gestion Promotions</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/stocks" (click)="closeSidebarOnNavigation()">
          <i class="fas fa-box-open"></i>
          <span>Gestion Stocks</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/listeCommandes" (click)="closeSidebarOnNavigation()">
          <i class="ri-shopping-cart-line"></i>
          <span>Gestion Commandes</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/calendrier" (click)="closeSidebarOnNavigation()">
          <i class="ri-calendar-line"></i>
          <span>Planification</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/avis" routerLinkActive="active" (click)="closeSidebarOnNavigation()">
          <i class="ri-star-line"></i>
          <span>Gestion Avis</span>
        </a>
      </li>
      <li routerLinkActive="active">
        <a routerLink="/admin/send-installer-invitation" (click)="closeSidebarOnNavigation()">
          <i class="ri-tools-line"></i>
          <span>Inviter Installateurs</span>
        </a>
      </li>

      <div class="menu-divider">
        <span class="divider-label">COMMUNICATION</span>
      </div>
      <li routerLinkActive="active">
        <a routerLink="/admin/messagerie" (click)="closeSidebarOnNavigation()">
          <i class="ri-message-2-line"></i>
          <span>Messagerie</span>
        </a>
      </li>
    </ul>
    <div class="sidebar-footer">
      <span *ngIf="isSidebarOpen"></span>
    </div>
  </aside>

  <div class="sidebar-overlay" 
       (click)="isSidebarOpen = false" 
       *ngIf="isMobile"
       [class.active]="isSidebarOpen"></div>

  <!-- Main Content -->
  <div class="main-content" [class.collapsed]="!isSidebarOpen && !isMobile">
    <!-- Navbar -->
    <nav class="navbar">
      <div class="navbar-left">
        <button (click)="toggleSidebar()" class="navbar-button">
          <i class="fas fa-bars"></i>
        </button>
        <h3 class="navbar-title">{{ pageTitle }}</h3>
      </div>
      <div class="navbar-right">
        <button class="message-btn">
          <i class="fas fa-comment-dots"></i>
        </button>
        <app-notifications class="nav-icon-btn"></app-notifications>
        <button class="nav-icon-btn">
          <i class="fas fa-user-circle"></i>
        </button>
        <button class="nav-icon-btn" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </nav>

    <!-- Scroll Container -->
    <div #scrollContainer class="scroll-container">
      <!-- Page Content -->
      <div class="content-wrapper">
        <ng-content></ng-content>
      </div>
    </div>
  </div>
</div>